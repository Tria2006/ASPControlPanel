@model DBModels.Models.Tariff

@{
    ViewData["Title"] = "Новый тариф";
}

<head>
    <meta name="viewport" content="width=device-width" />
    <link href="~/css/site.css" />
    <link href="~/lib/bootstrap/dist/css/bootstrap.min.css.map" />
    <script src="~/lib/jquery/dist/jquery.min.js" type="text/javascript"></script>
</head>

<h2>Новый тариф</h2>
<form asp-action="Create" class="create_update_form">
    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
    <input id="folderId" asp-for="FolderId" type="hidden" />
    <div class="form-group" style="width: 600px">
        <label asp-for="Name" class="control-label"></label>
        <input id="name" asp-for="Name" class="form-control" />
        <span asp-validation-for="Name" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="ValidFrom" class="control-label"></label>
        <input id="validFromDt" asp-for="ValidFrom" class="form-control" style="width: 160px" />
        <span asp-validation-for="ValidFrom" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="ValidTo" class="control-label"></label>
        <input id="validToDt" asp-for="ValidTo" class="form-control" style="width: 160px" />
        <span asp-validation-for="ValidTo" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="BaseTariffType" class="control-label"></label>
        <select asp-for="BaseTariffType" asp-items="Html.GetEnumSelectList<BaseTariffTypes>()" class="form-control" style="width: 250px"></select>
        <span asp-validation-for="BaseTariffType" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="BaseTariffValue" class="control-label"></label>
        <input asp-for="BaseTariffValue" class="form-control" style="width: 100px"/>
        <span asp-validation-for="BaseTariffValue" class="text-danger"></span>
    </div>
    <h4 style="margin-top: 50px; color: red">
        Добавление правил страхования будет доступно после сохранения тарифа
    </h4>

    <div class="form-group" style="margin-top: 50px">
        <input type="submit" value="Создать" name="create" class="btn btn-default" style="float: left" />
        <input type="submit" value="Создать и выйти" name="createAndExit" class="btn btn-default save_and_exit_btn" />
        <div>
            <button class="btn btn-default" asp-controller="Tariffs" asp-action="Index" asp-route-id="@Model.FolderId">Отменить и выйти</button>
        </div>
    </div>
</form>

<script>
    function SaveTempData() {
        $.ajax({
            url: "/Tariffs/SaveTempData",
            type: "post",
            data: {
                folderId: $("#folderId").val(),
                name: $("#name").val(),
                dateFrom: $("#validFromDt").val(),
                dateTo: $("#validToDt").val()
            },
            success: function () { }
        });
    };
</script>

